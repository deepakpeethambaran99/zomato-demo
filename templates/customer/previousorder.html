{% extends 'base.html' %} {% block title %}Zomato Demo {% endblock title%} 

{% block body %}
<div class="container-fluid">
    <div class="row">
      <nav class="navbar shadow-lg navbar-expand-lg navbar-light" style = "color:white; background-color: #ff6161;">
      {% comment %} <a href="/zomatoDemo/login/authenticate"> Go to Site</a> {% endcomment %}
      <div class="col">
          <a class="navbar-brand text-white" style="font-size: 1.8rem;" href="/zomatoDemo/Home/">Zomato Demo </a>
  
      </div>    
      <div class="col">
          <div class="float-end">
              
              <div class="dropdown float-start me-2">
                  <button class="btn text-white dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    {{user.get_username}}
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                    <li><a class="dropdown-item" href="{% url 'orders' %}">Previous Order</a></li>
                    {% if user.status != "customer" %}
                    <li><a class="dropdown-item" href="{% url 'gotodashboard' %}">Dashboard</a></li>
                    {% endif %}
                    <!-- <li><a class="dropdown-item" href="#">Something else here</a></li> -->
                  </ul>
                </div>
              {% if user.is_authenticated %}
              <a class="" href="{% url 'logout' %}" style="color:white;  padding-right:40px; font-size:1.6rem; " data-toggle="tooltip" data-placement="top" title="Log out"><i class="fa fa-sign-out" aria-hidden="true"></i></a>
              {% else %}
              <a class="" href="{% url 'login' %}" style="color:white;  padding-right:40px; font-size:1.6rem; " data-toggle="tooltip" data-placement="top" title="sign in"><i class="fa fa-sign-in"></i></a>
              {% endif %}
          </div>
      </div> 
        
      </nav>
    </div>

    <h4 class="display-6 m-5"> Previous Orders </h4>
    <hr>

    <div class="container-fluid">
      <div class="row">

        {% if not order %}
          <i class="text-center"> No previous orders </i>  
        {% endif %}

        {% for order in orders %}
        
        <div class="card p-4  m-1" style="width:20%;">
          <h5 class="card-title text-danger">{{order.restaurant}}</h5>
          <small class="card-text text-secondary">Order Id : {{order}} </small>
          <small class="card-text text-secondary">Ordered on : {{order.order_date}} </small>
          <br>
          {% for d in order.dishes.all %}
            {{d}}({{d.quantity}})-Rs.{{d.total_price}},
          {% endfor %}
          <hr>
          <p class="card-text">Total Amount : {{order.amount}} | No. of items : {{order.dishes.count}}</p>         
          
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}